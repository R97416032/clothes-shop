{"remainingRequest":"H:\\HBuilderProjects\\StoreWeb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!H:\\HBuilderProjects\\StoreWeb\\src\\components\\clothing.vue?vue&type=script&lang=js&","dependencies":[{"path":"H:\\HBuilderProjects\\StoreWeb\\src\\components\\clothing.vue","mtime":1623805048876},{"path":"H:\\HBuilderProjects\\StoreWeb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1623635300434},{"path":"H:\\HBuilderProjects\\StoreWeb\\node_modules\\babel-loader\\lib\\index.js","mtime":1623635308290},{"path":"H:\\HBuilderProjects\\StoreWeb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1623635300434},{"path":"H:\\HBuilderProjects\\StoreWeb\\node_modules\\vue-loader\\lib\\index.js","mtime":1623635306895}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport axios from 'axios' \r\nexport default {\r\n\tname:'cloth',\r\n\tdata(){\r\n\t\treturn{\r\n\t\t\tdialogImageUrl: '',\r\n\t\t\tdialogVisible: false,\r\n\t\t\tbase64:{\r\n\t\t\t\timg:''\r\n\t\t\t},\r\n\t\t\tfileList:[],\r\n\t\t\tfile:null,\r\n\t\t\ttempId:'',\r\n\t\t\tlogintel:'',\r\n\t\t\tcloForm:{\r\n\t\t\t\tid:'',\r\n\t\t\t\tclassification:'',\r\n\t\t\t\tdes:'',\r\n\t\t\t\tname:'',\r\n\t\t\t\tcolor:'',\r\n\t\t\t\tsize:'',\r\n\t\t\t\tstock:'',\r\n\t\t\t\tsale:'',\r\n\t\t\t\tprice:'',\r\n\t\t\t\tkeywords:'',\r\n\t\t\t},\r\n\t\t\t//上传\r\n\t\t\tcloFormChange:{\r\n\t\t\t\tid:'',\r\n\t\t\t\tclassification:'',\r\n\t\t\t\tdes:'',\r\n\t\t\t\tname:'',\r\n\t\t\t\tcolor:'',\r\n\t\t\t\tsize:'',\r\n\t\t\t\tstock:'',\r\n\t\t\t\tsale:'',\r\n\t\t\t\tprice:'',\r\n\t\t\t\tkeywords:'',\r\n\t\t\t},\r\n\t\t\tcloFormVisible: false,\r\n\t\t\tcloFormChangeVisible:false,\r\n\t\t\tdeldialogVisible:false,\r\n\t\t\t formLabelWidth: '120px',\r\n\t\t\t changeformLabelWidth:'120px',\r\n\t\tqueryParams:{\r\n\t\t\t// pageNum:1,\r\n\t\t\t// pageSize:10,\r\n\t\t\tclassification:'',\r\n\t\t\tname:''\r\n\t\t\t// tableName:'',\r\n\t\t\t// tableComment:''\r\n\t\t},\r\n\t\t// 非点击数据禁用\r\n\t\t multiple: true,\r\n\t\t // 遮罩层\r\n\t\tloading: false,  \r\n\t\t // 表数据\r\n\t\ttableList: [],\r\n\t\t// 总条数\r\n\t\ttotal: 0,\r\n\t\t  \r\n\t\t  //新增数据时弹出的对话框的表单的验证规则\r\n\t\t  CloFormRules:{\r\n\t\t\t  id:[\r\n\t\t\t\t  { required: true, message: '请输入服装ID', trigger: 'blur' }\r\n\t\t\t  ],\r\n\t\t\t  classification:[\r\n\t\t\t\t  { required: true, message: '请输入服装类别', trigger: 'blur' }\r\n\t\t\t  ],\r\n\t\t\t  name:[\r\n\t\t\t\t  { required: true, message: '请输入服装名称', trigger: 'blur' }\r\n\t\t\t  ],\r\n\t\t\t  color:[\r\n\t\t\t\t  { required: true, message: '请输入服装颜色', trigger: 'blur' }\r\n\t\t\t  ],\r\n\t\t\t  size:[\r\n\t\t\t\t  { required: true, message: '请输入服装尺寸', trigger: 'blur' }\r\n\t\t\t  ],\r\n\t\t\t  stock:[\r\n\t\t\t\t  { required: true, message: '请输入服装库存', trigger: 'blur' }\r\n\t\t\t  ],\r\n\t\t\t  sale:[\r\n\t\t\t\t  { required: true, message: '请输入服装销售情况', trigger: 'blur' }\r\n\t\t\t  ],\r\n\t\t\t  price:[\r\n\t\t\t\t  { required: true, message: '请输入服装价格', trigger: 'blur' }\r\n\t\t\t  ],\r\n\t\t\t  des:[\r\n\t\t\t  \t\t\t\t  { required: true, message: '请输入描述', trigger: 'blur' }\r\n\t\t\t  ],\r\n\t\t\t  keywords:[\r\n\t\t\t  \t\t\t\t  { required: true, message: '请输入关键字', trigger: 'blur' }\r\n\t\t\t  ]\r\n\t\t  },\r\n\t\t  //修改数据时弹出的对话框的表单的验证规则\r\n\t\t  cloFormChangeRules:{\r\n\t\t\t id:[\r\n\t\t\t \t\t  { required: true, message: '请输入服装ID', trigger: 'blur' } \r\n\t\t\t ],\r\n\t\t\t classification:[\r\n\t\t\t \t\t\t\t  { required: true, message: '请输入服装类别', trigger: 'blur' }\r\n\t\t\t ],\r\n\t\t\t name:[\r\n\t\t\t \t\t\t\t  { required: true, message: '请输入服装名称', trigger: 'blur' }\r\n\t\t\t ],\r\n\t\t\t color:[\r\n\t\t\t \t\t\t\t  { required: true, message: '请输入服装颜色', trigger: 'blur' }\r\n\t\t\t ],\r\n\t\t\t size:[\r\n\t\t\t \t\t\t\t  { required: true, message: '请输入服装尺寸', trigger: 'blur' }\r\n\t\t\t ],\r\n\t\t\t stock:[\r\n\t\t\t \t\t\t\t  { required: true, message: '请输入服装库存', trigger: 'blur' }\r\n\t\t\t ],\r\n\t\t\t sale:[\r\n\t\t\t \t\t\t\t  { required: true, message: '请输入服装销售情况', trigger: 'blur' }\r\n\t\t\t ],\r\n\t\t\t price:[\r\n\t\t\t \t\t\t\t  { required: true, message: '请输入服装价格', trigger: 'blur' }\r\n\t\t\t ] ,\r\n\t\t\t des:[\r\n\t\t\t \t\t\t\t  { required: true, message: '请输入描述', trigger: 'blur' }\r\n\t\t\t ],\r\n\t\t\t keywords:[\r\n\t\t\t \t\t\t\t  { required: true, message: '请输入关键字', trigger: 'blur' }\r\n\t\t\t ]\r\n\t\t  }\r\n\t\t\t } \r\n\t},\r\n\tcreated() {\r\n\t\tthis.getList();\r\n\t\t// this.logintel=this.$route.params.tel;\r\n\t\t// console.log(\"得到的用户电话\",this.$route.params.tel)\r\n\t},\r\n\tmethods:{\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t//RRRRRR\r\n\t\thandleRemove(file, fileList) {\r\n\t\t    console.log(file, fileList);\r\n\t\t  },\r\n\t\t  \r\n\t\t  handlePictureCardPreview(file) {\r\n\t\t    this.dialogImageUrl = file.url;\r\n\t\t\talert(file.name)\r\n\t\t\talert(this.dialogImageUrl)\r\n\t\t    this.dialogVisible = true;\r\n\t\t  },\r\n\t\t  \r\n\t\t  succe(file)\r\n\t\t  {\r\n\t\t\talert(file['file'])  \r\n\t\t\tthis.file=file\r\n\t\t  },\r\n\t\t  \r\n\t\t  exceed(){\r\n\t\t\talert(\"只允许上传一张照片哦！\")  \r\n\t\t  },\r\n\t\t  \r\n\t\t  classfy(file){\r\n\t\t\tthis.file=file\r\n\t\t\tvar fd = new FormData()\r\n\t\t\tfd.append('file', file.raw)\r\n\t\t\t  //上传的文件为二进制文件需要，file.raw才是\r\n\t\t\tfd.append('name', file.name)\r\n\t\t\tconst that=this\r\n\t\t\taxios.post('http://127.0.0.1:8088/classfy/',fd,{\r\n\t\t    headers: {\r\n\t\t          'Content-Type': 'multipart/form-data;'\r\n\t\t        }}\r\n\t\t  ).then((response) => {\r\n\t\t\t\t\tconsole.log(response)\r\n\t\t\t\t\tthat.cloFormChange.classification=response.data.class\r\n\t\t\t\t\tthat.cloForm.classification=response.data.class\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t\t.catch((error) => {\r\n\t\t\t\t\tconsole.log(error)\r\n\t\t\t\t})\r\n\t\t  },\r\n\t\t  getBase64(file) {\r\n\t\t    return new Promise(function(resolve, reject) {\r\n\t\t\t\tlet reader = new FileReader();\r\n\t\t\t\tlet imgResult = \"\";\r\n\t\t        reader.readAsDataURL(file);\r\n\t\t        reader.onload = function() {\r\n\t\t\t\timgResult = reader.result;\r\n\t\t\t\t\t};\r\n\t\t\t\treader.onerror = function(error) {\r\n\t\t                reject(error);\r\n\t\t\t\t\t};\r\n\t\t\t\treader.onloadend = function() {\r\n\t\t\t\t\tresolve(imgResult);\r\n\t\t\t\t\t};\r\n\t\t\t\t});\r\n\t\t},\r\n\t\tupload(id){//spring服务器\r\n\t\t\tvar fd = new FormData()\r\n\t\t\tfd.append('file', this.file.raw)\r\n\t\t\t\r\n\t\t\t  // 上传的文件为二进制文件需要，file.raw才是\r\n\t\t\tfd.append('id', id)\r\n\t\t\talert(id)\r\n\t\t\tconst that=this\r\n\t\t\taxios.post('http://127.0.0.1:8080/upload',fd\r\n\t\t\t).then((response) => {\r\n\t\t\t\t\t\t\tconsole.log(response)\r\n\t\t\t\t\t        // that.base64.img=response.data.img\r\n\t\t\t\t\t\t}).catch((error) => {\r\n\t\t\t\t\t\t\tconsole.log(error)\r\n\t\t\t})\r\n\t\t\tlocation.reload();//更新页面\r\n\t\t},\r\n\t\t\r\n\t\t//RRRRRR\r\n\t\t\t\r\n\t\t\r\n\t\t\r\n\t\t//WWWWWWW\r\n\t\t\r\n\t\t//重置搜索表单\r\n\t\tresetQueryForm(){\r\n\t\t\tthis.$refs.queryForm.resetFields();\r\n\t\t\tthis.getList();\r\n\t\t},\r\n\t\t//表格单击事件\r\n\t\thandleCurrentChange(val){\r\n\t\t\t this.currentRow = val;\r\n\t\t\t //进行数据选中点击事件后将修改和删除置为可用状态\r\n\t\t\t this.multiple=false;\r\n\t\t\t console.log(\"点击事件\",this.multiple);\r\n\t\t\t // console.log(\"得到当前行的值的id：\",this.currentRow.id);\r\n\t\t\t // console.log(\"val的值：\",val);\r\n\t\t},\r\n\t\t\r\n\t\t  /** 查询表集合 */\r\n\t\t getList() {\r\n\t\t\t // 因为进入到请求之中this会发生变化，因此要将this暂时用that替换存储，便于到请求中使用\r\n\t\t\t const that =this;\t\t\t \r\n\t\t       this.loading = true;\r\n\t\t\t   axios.post(\"http://127.0.0.1:8080/clothing/findall\").then(function (resp) { \r\n\t\t\t\t     that.tableList=resp.data;\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// console.log(\"之前被选中的状态111\",this.multiple);\r\n\t\t\t\t\tthis.multiple=true;\r\n\t\t\t\t\t// console.log(\"之后被选中的状态\",this.multiple);\r\n\t\t\t\t\tthis.loading = false;\r\n\t\t\t\t\r\n\t\t      \r\n\t\t     },\r\n\t\t\t // 通过衣服的种类查询衣服表单\r\n\t\t\t findbyclass(){\r\n\t\t\t\t var that=this;\r\n\t\t\t\t this.loading=true;\r\n\t\t\t\t console.log(this.queryParams.classification);\r\n\t\t\t\t axios.post(\"http://127.0.0.1:8080/clothing/findbyclass\",this.queryParams).then(function(resp){\r\n\t\t\t\t\t that.tableList=resp.data;\r\n\t\t\t\t\t that.total=resp.data.length;\r\n\t\t\t\t\t console.log(resp.data);\r\n\t\t\t\t });\r\n\t\t\t\t this.loading=false;\r\n\t\t\t },\r\n\t\t\t // 通过服装名称查找衣服表单\r\n\t\t\t findbyname(){\r\n\t\t\t\tvar that=this;\r\n\t\t\t\tthis.loading=true;\r\n\t\t\t\taxios.post(\"http://127.0.0.1:8080/clothing/findbyname\",this.queryParams).then(function(resp){\r\n\t\t\t\t\t\t\t\t\t that.tableList=resp.data;\r\n\t\t\t\t\t\t\t\t\t that.total=resp.data.length;\r\n\t\t\t\t\t\t\t\t\t console.log(resp.data);\r\n\t\t\t\t});\r\n\t\t\t\tthis.loading=false; \r\n\t\t\t },\r\n\t\t\t // 新增服装数据\r\n\t\t\t insert(){\r\n\t\t\t\t this.$refs.cloFormRef.validate( async valid=>{\r\n\t\t\t\t \tconsole.log(valid);\r\n\t\t\t\t \tif(!valid) return;\r\n\t\t\t\t const that=this;\r\n\t\t\t\t axios.post(\"http://127.0.0.1:8080/clothing/insert\",this.cloForm).then(function (resp){\r\n\t\t\t\t\t console.log(\"新增服装数据\",resp);\r\n\t\t\t\t\tif(resp.data==400){\r\n\t\t\t\t\t\tthat.$message({\r\n\t\t\t\t\t\t\t\t\t\t message:'插入数据成功！',\r\n\t\t\t\t\t\t\t\t\t\t type:'success'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthat.tempId=that.cloForm.id;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\telse if(resp.data==300)\r\n\t\t\t\t\tthat.$message({\r\n\t\t\t\t\t\tmessage:\"插入数据失败！\",\r\n\t\t\t\t\t\ttype:'error'\r\n\t\t\t\t\t});\r\n\t\t\t\t\telse\r\n\t\t\t\t\tthat.$message({\r\n\t\t\t\t\t\tmessage:'数据已经存在，插入失败！',\r\n\t\t\t\t\t\ttype:'error'\r\n\t\t\t\t\t});\t\t\t\t \r\n\t\t\t\t });\r\n\t\t\t\t this.upload(this.cloForm.id);\r\n\t\t\t\t this.multiple=true;//删除和修改不可用\r\n\t\t\t\t this.cloFormVisible = false;//关闭弹出框\r\n\t\t\t\t // this.getList();\r\n\t\t\t\t \r\n\t\t\t\t // this.$refs.cloFormRef.resetFields();\r\n\t\t\t\t });\r\n\t\t\t },\r\n\t\t\t // 删除点击的衣服数据\r\n\t\t\t del(){\r\n\t\t\t\tvar that=this;\t\t\t\t\r\n\t\t\t\taxios.post(\"http://127.0.0.1:8080/clothing/del\",that.currentRow).then(function(resp){\r\n\t\t\t\t\tif(resp.data==400)\r\n\t\t\t\t\tthat.$message({\r\n\t\t\t\t\t\t\t\t\t\t message:'删除成功',\r\n\t\t\t\t\t\t\t\t\t\t type:'success'\r\n\t\t\t\t\t});\r\n\t\t\t\t\telse\r\n\t\t\t\t\tthat.$message({\r\n\t\t\t\t\t\t\t\t\t\t message:'删除失败',\r\n\t\t\t\t\t\t\t\t\t\t type:'error'\r\n\t\t\t\t\t\t\t\t\t \r\n\t\t\t\t});\t\t\t\t\r\n\t\t\t\tthat.deldialogVisible=false;//关闭弹出框\r\n\t\t\t\tlocation.reload();//页面刷新\r\n\t\t\t\tthat.multiple=true;\t//将删除和修改按钮置于不可用状态\t\r\n\t\t\t\t\t});\r\n\t\t\t },\r\n\t\t\t // 选中表单需要修改的那一行，得到数据弹出对话框\r\n\t\t\t ChangeOneRow(){\r\n\t\t\t\tthis.cloFormChange=this.currentRow;\r\n\t\t\t\t\r\n\t\t\t\tthis.cloFormChangeVisible=true; \r\n\t\t\t },\r\n\t\t\t // 对得到的服装数据进行更改\r\n\t\t\t chang(){\r\n\t\t\t\t var that=this;\r\n\t\t\t\t this.$refs.cloFormChangeRef.validate( async valid=>{\r\n\t\t\t\t \t\t\t\t \tconsole.log(valid);\r\n\t\t\t\t \t\t\t\t \tif(!valid) return;\r\n\t\t\t\t\r\n\t\t\t\t axios.post(\"http://127.0.0.1:8080/clothing/change\",this.cloFormChange).then(function(resp){\r\n\t\t\t\t\t if(resp.data==400)\r\n\t\t\t\t\t that.$message({\r\n\t\t\t\t\t \t\t\tmessage:'修改成功',\r\n\t\t\t\t\t \t\t\ttype:'success'\r\n\t\t\t\t\t });\r\n\t\t\t\t\t else\r\n\t\t\t\t\t that.$message({\r\n\t\t\t\t\t \t\t\tmessage:'修改失败',\r\n\t\t\t\t\t \t\t\ttype:'error'\r\n\t\t\t\t\t });\t\t\t\t \r\n\t\t\t\t });\r\n\t\t\t\tthis.upload(this.cloFormChange.id)\r\n\t\t\t\tthat.$refs.CloTableRef.setCurrentRow();//表格中没有被选中的行\r\n\t\t\t\tthat.cloFormChangeVisible=false;//关闭弹出框\r\n\t\t\t\tthat.multiple=true;//删除和修改按钮不可用\r\n\t\t\t\t  });\r\n\t\t\t }\r\n\t\t\t\r\n\t}\r\n\t}\r\n\t\n //WWWWWWW\n",{"version":3,"sources":["clothing.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AAOA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;AAIA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA","file":"clothing.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <el-form :model=\"queryParams\" ref=\"queryForm\" :inline=\"true\" label-width=\"68px\">\r\n       <el-form-item label=\"衣服种类\" prop=\"classification\">\r\n         <el-input\r\n           v-model=\"queryParams.classification\"\r\n           placeholder=\"请输入衣服种类\"\r\n           clearable\r\n           size=\"small\"\r\n         />\r\n       </el-form-item >\r\n\t   <el-form-item >\r\n\t\t<el-button type=\"primary\" icon=\"el-icon-search\" size=\"mini\" @click=\"findbyclass\">搜索</el-button>\r\n\t   </el-form-item>\r\n       <el-form-item label=\"衣服名称\" prop=\"name\">\r\n         <el-input\r\n           v-model=\"queryParams.name\"\r\n           placeholder=\"请输入衣服名称\"\r\n           clearable\r\n           size=\"small\"\r\n         />\r\n\t\t</el-form-item>\r\n\t\t <el-form-item>\r\n         <el-button type=\"primary\" icon=\"el-icon-search\" size=\"mini\" @click=\"findbyname\">搜索</el-button>\r\n         <el-button icon=\"el-icon-refresh\" size=\"mini\" @click='resetQueryForm'>重置</el-button>\r\n       </el-form-item>\r\n\t   <el-form-item>\r\n\t\t   <span>{{logintel}}</span>\r\n\t   </el-form-item>\r\n\t   <el-row :gutter=\"10\" class=\"mb8\">\r\n\t        </el-col>\r\n\t\t\t\r\n\t        <el-col :span=\"1.5\">\r\n\t          <el-button\r\n\t\t\t\t@click=\"cloFormVisible = true\"\r\n\t            type=\"info\"\r\n\t            icon=\"el-icon-upload\"\r\n\t            size=\"mini\"\r\n\t          >新增</el-button>\r\n\t        </el-col>\r\n\t        <!-- 插入服装信息时弹出的带有表单的对话框 -->\r\n\t\t\t\t  <el-dialog title=\"插入服装信息\" :visible.sync=\"cloFormVisible\">\r\n\t\t\t\t\t<div align=\"center\">\r\n\t\t\t\t\t\t<el-upload\r\n\t\t\t\t\t\t\t\taction=\"http://127.0.0.1:8080/classfy/\"\r\n\t\t\t\t\t\t\t\tlist-type=\"picture-card\"\r\n\t\t\t\t\t\t\t\t:on-preview=\"handlePictureCardPreview\"\r\n\t\t\t\t\t\t\t\t:on-remove=\"handleRemove\"\r\n\t\t\t\t\t\t\t\t:file-list=\"fileList\"\r\n\t\t\t\t\t\t\t\t:limit=\"1\"\r\n\t\t\t\t\t\t\t\t:on-exceed=\"exceed\"\r\n\t\t\t\t\t\t\t\t:on-success=\"succe\"\r\n\t\t\t\t\t\t\t\t:auto-upload=\"false\"\r\n\t\t\t\t\t\t\t\t:on-change=\"classfy\">\r\n\t\t\t\t\t\t  <i class=\"el-icon-plus\"></i>\r\n\t\t\t\t\t\t</el-upload>\r\n\t\t\t\t\t\t<el-dialog :visible.sync=\"dialogVisible\" width=\"128px\" height=\"128px\">\r\n\t\t\t\t\t\t  <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\">\r\n\t\t\t\t\t\t</el-dialog>\r\n\t\t\t\t\t</div>  \r\n\t\t\t\t\t<el-form ref=\"cloFormRef\" style=\"margin-top: 5px;\" :model=\"cloForm\" :rules=\"CloFormRules\">\r\n\t\t\t\t\t\t<el-form-item label=\"服装ID\" prop=\"id\" :label-width=\"formLabelWidth\">\r\n\t\t\t\t\t\t    <el-input v-model=\"cloForm.id\"></el-input>\r\n\t\t\t\t\t\t  </el-form-item>\r\n\t\t\t\t\t  <el-form-item label=\"服装类别\" prop=\"classification\" :label-width=\"formLabelWidth\">\r\n\t\t\t\t\t  \t\t<el-input v-model=\"cloForm.classification\"></el-input>\r\n\t\t\t\t\t  </el-form-item>\t\t\t\t  \r\n\t\t\t\t\t  <el-form-item label=\"服装名称\" prop=\"name\"  :label-width=\"formLabelWidth\">\r\n\t\t\t\t\t  \t\t<el-input v-model=\"cloForm.name\"></el-input>\r\n\t\t\t\t\t  </el-form-item>\t\r\n\t\t\t\t\t<el-form-item label=\"服装描述\" prop=\"des\"  :label-width=\"formLabelWidth\">\r\n\t\t\t\t\t\t\t<el-input v-model=\"cloForm.des\"></el-input>\r\n\t\t\t\t\t</el-form-item>\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t  <el-form-item label=\"服装颜色\" prop=\"color\"  :label-width=\"formLabelWidth\">\r\n\t\t\t\t\t  \t\t<el-input v-model=\"cloForm.color\"></el-input>\r\n\t\t\t\t\t  </el-form-item>\t\t\t\t  \r\n\t\t\t\t\t  <el-form-item label=\"服装型号\" prop=\"size\"  :label-width=\"formLabelWidth\">\r\n\t\t\t\t\t  \t\t<el-input v-model=\"cloForm.size\"></el-input>\r\n\t\t\t\t\t  </el-form-item>\t\t\t\t \r\n\t\t\t\t\t  <el-form-item label=\"服装库存\" prop=\"stock\"  :label-width=\"formLabelWidth\">\r\n\t\t\t\t\t  \t\t<el-input v-model=\"cloForm.stock\"></el-input>\r\n\t\t\t\t\t  </el-form-item>\t\t\t\t  \r\n\t\t\t\t\t  <el-form-item label=\"服装销售情况\" prop=\"sale\"  :label-width=\"formLabelWidth\">\r\n\t\t\t\t\t  \t\t<el-input v-model=\"cloForm.sale\"></el-input>\r\n\t\t\t\t\t  </el-form-item>\t\t\t\t\r\n\t\t\t\t\t  <el-form-item label=\"服装价格\" prop=\"price\"  :label-width=\"formLabelWidth\">\r\n\t\t\t\t\t  \t\t<el-input v-model=\"cloForm.price\"></el-input>\r\n\t\t\t\t\t  </el-form-item>\r\n\t\t\t\t\t  <el-form-item label=\"关键字\" prop=\"keywords\"  :label-width=\"formLabelWidth\">\r\n\t\t\t\t\t  \t\t<el-input v-model=\"cloForm.keywords\"></el-input>\r\n\t\t\t\t\t  </el-form-item>\r\n\t\t\t\t\t</el-form> \r\n\t\t\t\t\t <div slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t\t     <el-button @click=\"cloFormVisible = false\">取 消</el-button>\r\n\t\t\t\t\t     <el-button type=\"primary\" @click='insert()'>确定</el-button>\r\n\t\t\t\t\t   </div>\r\n\t\t\t\t  </el-dialog>\r\n\t\t\t\t \r\n\t\t\t<el-col :span=\"1.5\">\r\n\t          <el-button\r\n\t            type=\"success\"\r\n\t            icon=\"el-icon-edit\"\r\n\t            size=\"mini\"\r\n\t            :disabled=\"multiple\"\r\n\t\t\t\t@click=\"ChangeOneRow\"\r\n\t          >修改</el-button>\r\n\t        </el-col>\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t<!-- 进行表格信息修改时弹出的带有表单的对话框 -->\r\n\t\t\t<el-dialog title=\"修改的服装信息\" :visible.sync=\"cloFormChangeVisible\">\r\n\t\t\t<div align=\"center\">\r\n\t\t\t\t<el-upload\r\n\t\t\t\t\t\taction=\"http://127.0.0.1:8080/classfy/\"\r\n\t\t\t\t\t\tlist-type=\"picture-card\"\r\n\t\t\t\t\t\t:on-preview=\"handlePictureCardPreview\"\r\n\t\t\t\t\t\t:on-remove=\"handleRemove\"\r\n\t\t\t\t\t\t:file-list=\"fileList\"\r\n\t\t\t\t\t\t:limit=\"1\"\r\n\t\t\t\t\t\t:on-exceed=\"exceed\"\r\n\t\t\t\t\t\t:on-success=\"succe\"\r\n\t\t\t\t\t\t:auto-upload=\"false\"\r\n\t\t\t\t\t\t:on-change=\"classfy\">\r\n\t\t\t\t  <i class=\"el-icon-plus\"></i>\r\n\t\t\t\t</el-upload>\r\n\t\t\t\t<el-dialog :visible.sync=\"dialogVisible\" width=\"128px\" height=\"128px\">\r\n\t\t\t\t  <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\">\r\n\t\t\t\t</el-dialog>\r\n\t\t\t</div>  \r\n\t\t\t\r\n\t\t\t<el-form ref=\"cloFormChangeRef\" :model=\"cloFormChange\" :rules=\"cloFormChangeRules\">\r\n\t\t\t<el-form-item label=\"服装ID\" prop=\"id\" :label-width=\"changeformLabelWidth\">\r\n\t\t\t    <el-input v-model=\"cloFormChange.id\"></el-input>\r\n\t\t\t  </el-form-item>\r\n\t\t\t<el-form-item label=\"服装类别\" prop=\"classification\" :label-width=\"formLabelWidth\">\r\n\t\t\t    <el-input v-model=\"cloFormChange.classification\"></el-input>\r\n\t\t\t  </el-form-item>\t\t\t\t  \r\n\t\t\t<el-form-item label=\"服装名称\" prop=\"name\"  :label-width=\"formLabelWidth\">\r\n\t\t\t    <el-input v-model=\"cloFormChange.name\"></el-input>\r\n\t\t\t</el-form-item>\t\t\r\n\t\t\t<el-form-item label=\"服装描述\" prop=\"des\"  :label-width=\"formLabelWidth\">\r\n\t\t\t  <el-input v-model=\"cloFormChange.des\"></el-input>\r\n\t\t\t</el-form-item>\r\n\t\t\t  <el-form-item label=\"服装颜色\" prop=\"color\"  :label-width=\"formLabelWidth\">\r\n\t\t\t    <el-input v-model=\"cloFormChange.color\"></el-input>\r\n\t\t\t  </el-form-item>\t\t\t\t  \r\n\t\t\t <el-form-item label=\"服装型号\" prop=\"size\"  :label-width=\"formLabelWidth\">\r\n\t\t\t    <el-input v-model=\"cloFormChange.size\"></el-input>\r\n\t\t\t  </el-form-item>\t\t\t\t \r\n\t\t\t  <el-form-item label=\"服装库存\" prop=\"stock\"  :label-width=\"formLabelWidth\">\r\n\t\t\t    <el-input v-model=\"cloFormChange.stock\"></el-input>\r\n\t\t  </el-form-item>\t\t\t\t  \r\n\t\t  <el-form-item label=\"服装销售情况\" prop=\"sale\"  :label-width=\"formLabelWidth\">\r\n\t\t    <el-input v-model=\"cloFormChange.sale\"></el-input>\r\n\t\t  </el-form-item>\t\t\t\t\r\n\t\t  <el-form-item label=\"服装价格\" prop=\"price\"  :label-width=\"formLabelWidth\">\r\n\t\t    <el-input v-model=\"cloFormChange.price\"></el-input>\r\n\t\t  </el-form-item>\r\n\t\t  <el-form-item label=\"关键字\" prop=\"keywords\"  :label-width=\"formLabelWidth\">\r\n\t\t    <el-input v-model=\"cloFormChange.keywords\"></el-input>\r\n\t\t  </el-form-item>\r\n\t\t\t</el-form> \r\n\t\t <div slot=\"footer\" class=\"dialog-footer\">\r\n\t\t  <el-button @click=\"cloFormChangeVisible = false\">取 消</el-button>\r\n\t\t     <el-button type=\"primary\" @click='chang'>确定</el-button>\r\n\t\t   </div>\r\n\t\t\t</el-dialog>\r\n\t\t\t\r\n\t\t\t\r\n\t        <el-col :span=\"1.5\">\r\n\t          <el-button\r\n\t            type=\"danger\"\r\n\t            icon=\"el-icon-delete\"\r\n\t            size=\"mini\"\r\n\t            :disabled=\"multiple\"\r\n\t\t\t\t@click=\"deldialogVisible=true\"\r\n\t          >删除</el-button>\r\n\t        </el-col>\r\n\t\t\t<el-dialog\r\n\t\t\t  title=\"提示\"\r\n\t\t\t  :visible.sync=\"deldialogVisible\"\r\n\t\t\t  width=\"30%\">\r\n\t\t\t  <span>确认删除？</span>\r\n\t\t\t  <span slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t    <el-button @click=\"dialogVisible = false\">取 消</el-button>\r\n\t\t\t    <el-button type=\"primary\" @click=\"del\">确 定</el-button>\r\n\t\t\t  </span>\r\n\t\t\t</el-dialog>\r\n\t      </el-row>\r\n\t\t  \r\n\t\t  <!-- 服装信息表格 -->\r\n\t   \t <el-table v-loading=loading  :data=\"tableList\" highlight-current-row \r\n\t\t @current-change=\"handleCurrentChange\" ref=\"CloTableRef\"  >\r\n\t   \t       <el-table-column label=\"序号\" type=\"index\" width=\"50\">\r\n\t   \t        <template slot-scope=\"scope\">\r\n\t   \t           <!-- <span>{{(queryParams.pageNum - 1) * queryParams.pageSize + scope.$index + 1}}</span> -->\r\n\t\t\t\t   <span>{{scope.$index+1}}</span>\r\n\t   \t         </template>\t\t\t\t \r\n\t   \t       </el-table-column>\r\n\t\t\t   <el-table-column label=\"类别\" align=\"center\" prop=\"classification\"  :show-overflow-tooltip=\"true\" width=\"140\" />\r\n\t   \t       <el-table-column label=\"ID\"   align=\"center\" prop=\"id\" :show-overflow-tooltip=\"true\"  width=\"140\" />\r\n\t   \t       <el-table-column label=\"名称\" align=\"center\" prop=\"name\" :show-overflow-tooltip=\"true\" width=\"140\"/>\r\n\t   \t       <el-table-column label=\"颜色\" align=\"center\" prop=\"color\" width=\"140\" />\r\n\t   \t       <el-table-column label=\"大小\" align=\"center\" prop=\"size\" width=\"140\" />\r\n\t\t\t   <el-table-column label=\"库存\" align=\"center\" prop=\"stock\" width=\"140\" />\r\n\t\t\t   <el-table-column label=\"销售\" align=\"center\" prop=\"sale\" width=\"140\" />\r\n\t\t\t   <el-table-column label=\"价格\" align=\"center\" prop=\"price\" width=\"140\" />\r\n\t\t\t   <el-table-column label=\"图片\" align=\"center\" prop=\"img\" width=\"160\" >\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t<el-image \r\n\t\t\t\t    style=\"width: 100px; height: 100px\"\r\n\t\t\t\t    :src=\"'data:image/jpg;base64,'+tableList[scope.$index].base64\" \r\n\t\t\t\t    :preview-src-list=\"['data:image/jpg;base64,'+tableList[scope.$index].base64]\"\r\n\t\t\t\t\t>\r\n\t\t\t\t  </el-image>\r\n\t\t\t\t   </template>\r\n\t\t\t   </el-table-column>\r\n\t\t\t   \r\n\t   \t     </el-table>\r\n\t\t\t </el-pagination>\r\n     </el-form>\r\n\t  \n</template>\n\n<script>\r\nimport axios from 'axios' \r\nexport default {\r\n\tname:'cloth',\r\n\tdata(){\r\n\t\treturn{\r\n\t\t\tdialogImageUrl: '',\r\n\t\t\tdialogVisible: false,\r\n\t\t\tbase64:{\r\n\t\t\t\timg:''\r\n\t\t\t},\r\n\t\t\tfileList:[],\r\n\t\t\tfile:null,\r\n\t\t\ttempId:'',\r\n\t\t\tlogintel:'',\r\n\t\t\tcloForm:{\r\n\t\t\t\tid:'',\r\n\t\t\t\tclassification:'',\r\n\t\t\t\tdes:'',\r\n\t\t\t\tname:'',\r\n\t\t\t\tcolor:'',\r\n\t\t\t\tsize:'',\r\n\t\t\t\tstock:'',\r\n\t\t\t\tsale:'',\r\n\t\t\t\tprice:'',\r\n\t\t\t\tkeywords:'',\r\n\t\t\t},\r\n\t\t\t//上传\r\n\t\t\tcloFormChange:{\r\n\t\t\t\tid:'',\r\n\t\t\t\tclassification:'',\r\n\t\t\t\tdes:'',\r\n\t\t\t\tname:'',\r\n\t\t\t\tcolor:'',\r\n\t\t\t\tsize:'',\r\n\t\t\t\tstock:'',\r\n\t\t\t\tsale:'',\r\n\t\t\t\tprice:'',\r\n\t\t\t\tkeywords:'',\r\n\t\t\t},\r\n\t\t\tcloFormVisible: false,\r\n\t\t\tcloFormChangeVisible:false,\r\n\t\t\tdeldialogVisible:false,\r\n\t\t\t formLabelWidth: '120px',\r\n\t\t\t changeformLabelWidth:'120px',\r\n\t\tqueryParams:{\r\n\t\t\t// pageNum:1,\r\n\t\t\t// pageSize:10,\r\n\t\t\tclassification:'',\r\n\t\t\tname:''\r\n\t\t\t// tableName:'',\r\n\t\t\t// tableComment:''\r\n\t\t},\r\n\t\t// 非点击数据禁用\r\n\t\t multiple: true,\r\n\t\t // 遮罩层\r\n\t\tloading: false,  \r\n\t\t // 表数据\r\n\t\ttableList: [],\r\n\t\t// 总条数\r\n\t\ttotal: 0,\r\n\t\t  \r\n\t\t  //新增数据时弹出的对话框的表单的验证规则\r\n\t\t  CloFormRules:{\r\n\t\t\t  id:[\r\n\t\t\t\t  { required: true, message: '请输入服装ID', trigger: 'blur' }\r\n\t\t\t  ],\r\n\t\t\t  classification:[\r\n\t\t\t\t  { required: true, message: '请输入服装类别', trigger: 'blur' }\r\n\t\t\t  ],\r\n\t\t\t  name:[\r\n\t\t\t\t  { required: true, message: '请输入服装名称', trigger: 'blur' }\r\n\t\t\t  ],\r\n\t\t\t  color:[\r\n\t\t\t\t  { required: true, message: '请输入服装颜色', trigger: 'blur' }\r\n\t\t\t  ],\r\n\t\t\t  size:[\r\n\t\t\t\t  { required: true, message: '请输入服装尺寸', trigger: 'blur' }\r\n\t\t\t  ],\r\n\t\t\t  stock:[\r\n\t\t\t\t  { required: true, message: '请输入服装库存', trigger: 'blur' }\r\n\t\t\t  ],\r\n\t\t\t  sale:[\r\n\t\t\t\t  { required: true, message: '请输入服装销售情况', trigger: 'blur' }\r\n\t\t\t  ],\r\n\t\t\t  price:[\r\n\t\t\t\t  { required: true, message: '请输入服装价格', trigger: 'blur' }\r\n\t\t\t  ],\r\n\t\t\t  des:[\r\n\t\t\t  \t\t\t\t  { required: true, message: '请输入描述', trigger: 'blur' }\r\n\t\t\t  ],\r\n\t\t\t  keywords:[\r\n\t\t\t  \t\t\t\t  { required: true, message: '请输入关键字', trigger: 'blur' }\r\n\t\t\t  ]\r\n\t\t  },\r\n\t\t  //修改数据时弹出的对话框的表单的验证规则\r\n\t\t  cloFormChangeRules:{\r\n\t\t\t id:[\r\n\t\t\t \t\t  { required: true, message: '请输入服装ID', trigger: 'blur' } \r\n\t\t\t ],\r\n\t\t\t classification:[\r\n\t\t\t \t\t\t\t  { required: true, message: '请输入服装类别', trigger: 'blur' }\r\n\t\t\t ],\r\n\t\t\t name:[\r\n\t\t\t \t\t\t\t  { required: true, message: '请输入服装名称', trigger: 'blur' }\r\n\t\t\t ],\r\n\t\t\t color:[\r\n\t\t\t \t\t\t\t  { required: true, message: '请输入服装颜色', trigger: 'blur' }\r\n\t\t\t ],\r\n\t\t\t size:[\r\n\t\t\t \t\t\t\t  { required: true, message: '请输入服装尺寸', trigger: 'blur' }\r\n\t\t\t ],\r\n\t\t\t stock:[\r\n\t\t\t \t\t\t\t  { required: true, message: '请输入服装库存', trigger: 'blur' }\r\n\t\t\t ],\r\n\t\t\t sale:[\r\n\t\t\t \t\t\t\t  { required: true, message: '请输入服装销售情况', trigger: 'blur' }\r\n\t\t\t ],\r\n\t\t\t price:[\r\n\t\t\t \t\t\t\t  { required: true, message: '请输入服装价格', trigger: 'blur' }\r\n\t\t\t ] ,\r\n\t\t\t des:[\r\n\t\t\t \t\t\t\t  { required: true, message: '请输入描述', trigger: 'blur' }\r\n\t\t\t ],\r\n\t\t\t keywords:[\r\n\t\t\t \t\t\t\t  { required: true, message: '请输入关键字', trigger: 'blur' }\r\n\t\t\t ]\r\n\t\t  }\r\n\t\t\t } \r\n\t},\r\n\tcreated() {\r\n\t\tthis.getList();\r\n\t\t// this.logintel=this.$route.params.tel;\r\n\t\t// console.log(\"得到的用户电话\",this.$route.params.tel)\r\n\t},\r\n\tmethods:{\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t//RRRRRR\r\n\t\thandleRemove(file, fileList) {\r\n\t\t    console.log(file, fileList);\r\n\t\t  },\r\n\t\t  \r\n\t\t  handlePictureCardPreview(file) {\r\n\t\t    this.dialogImageUrl = file.url;\r\n\t\t\talert(file.name)\r\n\t\t\talert(this.dialogImageUrl)\r\n\t\t    this.dialogVisible = true;\r\n\t\t  },\r\n\t\t  \r\n\t\t  succe(file)\r\n\t\t  {\r\n\t\t\talert(file['file'])  \r\n\t\t\tthis.file=file\r\n\t\t  },\r\n\t\t  \r\n\t\t  exceed(){\r\n\t\t\talert(\"只允许上传一张照片哦！\")  \r\n\t\t  },\r\n\t\t  \r\n\t\t  classfy(file){\r\n\t\t\tthis.file=file\r\n\t\t\tvar fd = new FormData()\r\n\t\t\tfd.append('file', file.raw)\r\n\t\t\t  //上传的文件为二进制文件需要，file.raw才是\r\n\t\t\tfd.append('name', file.name)\r\n\t\t\tconst that=this\r\n\t\t\taxios.post('http://127.0.0.1:8088/classfy/',fd,{\r\n\t\t    headers: {\r\n\t\t          'Content-Type': 'multipart/form-data;'\r\n\t\t        }}\r\n\t\t  ).then((response) => {\r\n\t\t\t\t\tconsole.log(response)\r\n\t\t\t\t\tthat.cloFormChange.classification=response.data.class\r\n\t\t\t\t\tthat.cloForm.classification=response.data.class\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t\t.catch((error) => {\r\n\t\t\t\t\tconsole.log(error)\r\n\t\t\t\t})\r\n\t\t  },\r\n\t\t  getBase64(file) {\r\n\t\t    return new Promise(function(resolve, reject) {\r\n\t\t\t\tlet reader = new FileReader();\r\n\t\t\t\tlet imgResult = \"\";\r\n\t\t        reader.readAsDataURL(file);\r\n\t\t        reader.onload = function() {\r\n\t\t\t\timgResult = reader.result;\r\n\t\t\t\t\t};\r\n\t\t\t\treader.onerror = function(error) {\r\n\t\t                reject(error);\r\n\t\t\t\t\t};\r\n\t\t\t\treader.onloadend = function() {\r\n\t\t\t\t\tresolve(imgResult);\r\n\t\t\t\t\t};\r\n\t\t\t\t});\r\n\t\t},\r\n\t\tupload(id){//spring服务器\r\n\t\t\tvar fd = new FormData()\r\n\t\t\tfd.append('file', this.file.raw)\r\n\t\t\t\r\n\t\t\t  // 上传的文件为二进制文件需要，file.raw才是\r\n\t\t\tfd.append('id', id)\r\n\t\t\talert(id)\r\n\t\t\tconst that=this\r\n\t\t\taxios.post('http://127.0.0.1:8080/upload',fd\r\n\t\t\t).then((response) => {\r\n\t\t\t\t\t\t\tconsole.log(response)\r\n\t\t\t\t\t        // that.base64.img=response.data.img\r\n\t\t\t\t\t\t}).catch((error) => {\r\n\t\t\t\t\t\t\tconsole.log(error)\r\n\t\t\t})\r\n\t\t\tlocation.reload();//更新页面\r\n\t\t},\r\n\t\t\r\n\t\t//RRRRRR\r\n\t\t\t\r\n\t\t\r\n\t\t\r\n\t\t//WWWWWWW\r\n\t\t\r\n\t\t//重置搜索表单\r\n\t\tresetQueryForm(){\r\n\t\t\tthis.$refs.queryForm.resetFields();\r\n\t\t\tthis.getList();\r\n\t\t},\r\n\t\t//表格单击事件\r\n\t\thandleCurrentChange(val){\r\n\t\t\t this.currentRow = val;\r\n\t\t\t //进行数据选中点击事件后将修改和删除置为可用状态\r\n\t\t\t this.multiple=false;\r\n\t\t\t console.log(\"点击事件\",this.multiple);\r\n\t\t\t // console.log(\"得到当前行的值的id：\",this.currentRow.id);\r\n\t\t\t // console.log(\"val的值：\",val);\r\n\t\t},\r\n\t\t\r\n\t\t  /** 查询表集合 */\r\n\t\t getList() {\r\n\t\t\t // 因为进入到请求之中this会发生变化，因此要将this暂时用that替换存储，便于到请求中使用\r\n\t\t\t const that =this;\t\t\t \r\n\t\t       this.loading = true;\r\n\t\t\t   axios.post(\"http://127.0.0.1:8080/clothing/findall\").then(function (resp) { \r\n\t\t\t\t     that.tableList=resp.data;\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// console.log(\"之前被选中的状态111\",this.multiple);\r\n\t\t\t\t\tthis.multiple=true;\r\n\t\t\t\t\t// console.log(\"之后被选中的状态\",this.multiple);\r\n\t\t\t\t\tthis.loading = false;\r\n\t\t\t\t\r\n\t\t      \r\n\t\t     },\r\n\t\t\t // 通过衣服的种类查询衣服表单\r\n\t\t\t findbyclass(){\r\n\t\t\t\t var that=this;\r\n\t\t\t\t this.loading=true;\r\n\t\t\t\t console.log(this.queryParams.classification);\r\n\t\t\t\t axios.post(\"http://127.0.0.1:8080/clothing/findbyclass\",this.queryParams).then(function(resp){\r\n\t\t\t\t\t that.tableList=resp.data;\r\n\t\t\t\t\t that.total=resp.data.length;\r\n\t\t\t\t\t console.log(resp.data);\r\n\t\t\t\t });\r\n\t\t\t\t this.loading=false;\r\n\t\t\t },\r\n\t\t\t // 通过服装名称查找衣服表单\r\n\t\t\t findbyname(){\r\n\t\t\t\tvar that=this;\r\n\t\t\t\tthis.loading=true;\r\n\t\t\t\taxios.post(\"http://127.0.0.1:8080/clothing/findbyname\",this.queryParams).then(function(resp){\r\n\t\t\t\t\t\t\t\t\t that.tableList=resp.data;\r\n\t\t\t\t\t\t\t\t\t that.total=resp.data.length;\r\n\t\t\t\t\t\t\t\t\t console.log(resp.data);\r\n\t\t\t\t});\r\n\t\t\t\tthis.loading=false; \r\n\t\t\t },\r\n\t\t\t // 新增服装数据\r\n\t\t\t insert(){\r\n\t\t\t\t this.$refs.cloFormRef.validate( async valid=>{\r\n\t\t\t\t \tconsole.log(valid);\r\n\t\t\t\t \tif(!valid) return;\r\n\t\t\t\t const that=this;\r\n\t\t\t\t axios.post(\"http://127.0.0.1:8080/clothing/insert\",this.cloForm).then(function (resp){\r\n\t\t\t\t\t console.log(\"新增服装数据\",resp);\r\n\t\t\t\t\tif(resp.data==400){\r\n\t\t\t\t\t\tthat.$message({\r\n\t\t\t\t\t\t\t\t\t\t message:'插入数据成功！',\r\n\t\t\t\t\t\t\t\t\t\t type:'success'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthat.tempId=that.cloForm.id;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\telse if(resp.data==300)\r\n\t\t\t\t\tthat.$message({\r\n\t\t\t\t\t\tmessage:\"插入数据失败！\",\r\n\t\t\t\t\t\ttype:'error'\r\n\t\t\t\t\t});\r\n\t\t\t\t\telse\r\n\t\t\t\t\tthat.$message({\r\n\t\t\t\t\t\tmessage:'数据已经存在，插入失败！',\r\n\t\t\t\t\t\ttype:'error'\r\n\t\t\t\t\t});\t\t\t\t \r\n\t\t\t\t });\r\n\t\t\t\t this.upload(this.cloForm.id);\r\n\t\t\t\t this.multiple=true;//删除和修改不可用\r\n\t\t\t\t this.cloFormVisible = false;//关闭弹出框\r\n\t\t\t\t // this.getList();\r\n\t\t\t\t \r\n\t\t\t\t // this.$refs.cloFormRef.resetFields();\r\n\t\t\t\t });\r\n\t\t\t },\r\n\t\t\t // 删除点击的衣服数据\r\n\t\t\t del(){\r\n\t\t\t\tvar that=this;\t\t\t\t\r\n\t\t\t\taxios.post(\"http://127.0.0.1:8080/clothing/del\",that.currentRow).then(function(resp){\r\n\t\t\t\t\tif(resp.data==400)\r\n\t\t\t\t\tthat.$message({\r\n\t\t\t\t\t\t\t\t\t\t message:'删除成功',\r\n\t\t\t\t\t\t\t\t\t\t type:'success'\r\n\t\t\t\t\t});\r\n\t\t\t\t\telse\r\n\t\t\t\t\tthat.$message({\r\n\t\t\t\t\t\t\t\t\t\t message:'删除失败',\r\n\t\t\t\t\t\t\t\t\t\t type:'error'\r\n\t\t\t\t\t\t\t\t\t \r\n\t\t\t\t});\t\t\t\t\r\n\t\t\t\tthat.deldialogVisible=false;//关闭弹出框\r\n\t\t\t\tlocation.reload();//页面刷新\r\n\t\t\t\tthat.multiple=true;\t//将删除和修改按钮置于不可用状态\t\r\n\t\t\t\t\t});\r\n\t\t\t },\r\n\t\t\t // 选中表单需要修改的那一行，得到数据弹出对话框\r\n\t\t\t ChangeOneRow(){\r\n\t\t\t\tthis.cloFormChange=this.currentRow;\r\n\t\t\t\t\r\n\t\t\t\tthis.cloFormChangeVisible=true; \r\n\t\t\t },\r\n\t\t\t // 对得到的服装数据进行更改\r\n\t\t\t chang(){\r\n\t\t\t\t var that=this;\r\n\t\t\t\t this.$refs.cloFormChangeRef.validate( async valid=>{\r\n\t\t\t\t \t\t\t\t \tconsole.log(valid);\r\n\t\t\t\t \t\t\t\t \tif(!valid) return;\r\n\t\t\t\t\r\n\t\t\t\t axios.post(\"http://127.0.0.1:8080/clothing/change\",this.cloFormChange).then(function(resp){\r\n\t\t\t\t\t if(resp.data==400)\r\n\t\t\t\t\t that.$message({\r\n\t\t\t\t\t \t\t\tmessage:'修改成功',\r\n\t\t\t\t\t \t\t\ttype:'success'\r\n\t\t\t\t\t });\r\n\t\t\t\t\t else\r\n\t\t\t\t\t that.$message({\r\n\t\t\t\t\t \t\t\tmessage:'修改失败',\r\n\t\t\t\t\t \t\t\ttype:'error'\r\n\t\t\t\t\t });\t\t\t\t \r\n\t\t\t\t });\r\n\t\t\t\tthis.upload(this.cloFormChange.id)\r\n\t\t\t\tthat.$refs.CloTableRef.setCurrentRow();//表格中没有被选中的行\r\n\t\t\t\tthat.cloFormChangeVisible=false;//关闭弹出框\r\n\t\t\t\tthat.multiple=true;//删除和修改按钮不可用\r\n\t\t\t\t  });\r\n\t\t\t }\r\n\t\t\t\r\n\t}\r\n\t}\r\n\t\n //WWWWWWW\n</script>\n<style>\n</style>\n"]}]}